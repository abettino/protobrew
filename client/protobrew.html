<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Welcome to Protobrew</title>

<!--[if IE 5]>
<style type="text/css"> 
/* place css box model fixes for IE 5* in this conditional comment */
#sidebar1 { width: 230px; }
</style>
<![endif]--><!--[if IE]>
<style type="text/css"> 
/* place css fixes for all versions of IE in this conditional comment */
#sidebar1 { padding-top: 30px; }
#mainContent { zoom: 1; }
/* the above proprietary zoom property gives IE the hasLayout it needs to avoid several bugs */
</style>
<![endif]-->

<script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>
</head>

<template name="null">
  {{> menu}}
  {{> main}}
</template>

<template name="main">

    <div class="content">
    {{#if modeIs "index"}}
    {{> index}}
    {{/if}}

    {{#if modeIs "search"}}
    {{> search}}
    {{/if}}

    {{#if modeIs "tag"}}
    {{> tag}}
    {{/if}}

    {{#if modeIs "entry"}}
    {{> entry}}
    {{/if}}
    </div>
</template>

<template name="index">
    <a class="action-btn" href="#" value="sidenav_btn" id="sidenav_btn"><span aria-hidden="true" data-icon="&#x22;"></span> Panel</a> 
    {{{content.text}}}
</template>

<template name="search">
    <h3>Search results for "{{term}}"</h3>

    {{#each results}}
        <h2><a href="/{{this.title}}">{{this.title}}</a></h2>
        <p>{{this.text}}</p>
    {{/each}}

</template>

<template name="tag">
    <h3>Entries tagged with "{{tag}}"</h3>

    {{#each results}}
        <h2><a href="/{{this.title}}">{{this.title}}</a></h2>
        <p>{{this.text}}</p>
    {{/each}}

</template>

<template name="entry">

    <!-- jpanel menu button -->
    <a class="action-btn" href="#" value="sidenav_btn" id="sidenav_btn"><span aria-hidden="true" data-icon="&#x22;"></span> Panel</a> 
    
    <h1 id="article-title" class="article-title">{{title}}</h1>

    {{#if edit_mode}}
    <form>
    	<div id='edit_mode_toolbar'class="action-toolbar edit_mode">
    		<a class="action-btn" href="#" value="delete" id="delete"><span aria-hidden="true" data-icon="&#x64;"></span></a>
    		<a class="action-btn" href="#" value="cancel" id="cancel"><span aria-hidden="true" data-icon="&#x62;"></span></a>
    		<a class="action-btn" href="#" value="save" id="save"><span aria-hidden="true" data-icon="&#x21;"></span> Save</a>
        </div>
        {{#with entry}}
        {{> editEntry}}
        {{/with}}
    </form>
    {{else}}
	
    {{#if entry}}

        <div id= "user_toolbar" class="action-toolbar">
            <a class="action-btn" href="#" value="new_page" id="new_page"><span aria-hidden="true" data-icon="&#x22;"></span> New Page</a>
            <a class="action-btn" href="#" value="toggle_star" id="toggle_star"><span aria-hidden="true" data-icon="&#x22;"></span> Star Page</a>
        </div>
        {{#if currentUser}}
        	<div id= "edit_button" class="action-toolbar" class="view_mode">
        		<a class="action-btn" href="#" value="edit" id="edit"><span aria-hidden="true" data-icon="&#x22;"></span> Edit</a>
        	</div>
        {{/if}}
        <p>{{{entry.text}}}</p>

        {{#if entry.tags.length}}
            <h2>Tags</h2>
            <ul>
                {{#each entry.tags}}
                <li class="article-tag"><a href="javascript:void(0);">{{this}}</a></li>
                {{/each}}
            </ul>
        {{/if}}
        {{else}}
            <p>{{title}} doesn't exist yet.</p>
                {{#if currentUser}}
                	<a class="action-btn" href="#" value="edit" id="edit"><span aria-hidden="true" data-icon="&#x22;"></span> Create it!</a>
                {{/if}}

        {{/if}}

    {{/if}}
</template>


<template name="editEntry">
    <textarea id="entry-text" placeholder="Tell your story.">{{text}}</textarea>

    <p>
        <h2>Tags</h2>
        <textarea id="entry-tags"></textarea>
        <small><em>press &#x23ce; between tags</em></small>
    </p>
</template>

<template name="user">
    {{info}}
</template>


<template name="leftNav">
  <div id="left_nav">
    <div id="logo"><a href="/">ProtoBrew Wiki</a></div>
    <div id="tw_bar"><a href="/">by Tin Whiskers</a></div>
    <div id="search"><input class="txtOptionInput searchField" type="search" results="5" size="15" accesskey="F" autocomplete="off" lastsearchtext="aasdfasdfsd" placeholder="" id="search-input" value="{{term}}"></div>

    <nav>
    	<ul>
    		<li {{#if articleIs "/"}}class="selected"{{/if}}>
                <a class="left-nav" href="/">
                    <span aria-hidden="true" data-icon="&#x68;"></span> Home
                </a>
            </li>
			<li {{#if pageIs "Articles"}}class="selected"{{/if}}><a class="left-nav" href="/Articles"><span aria-hidden="true" data-icon="&#x6e;"></span> Articles</a></li>
			<li {{#if pageIs "Brew systems"}}class="selected"{{/if}}><a class="left-nav" href="/Brew systems"><span aria-hidden="true" data-icon="&#xe007;"></span> Brew systems</a></li>
    	</ul>
    

        <div id="buttons">
            <!--
        	<a href="javascript:void(0);"><span aria-hidden="true" data-icon="&#x73;"></span> Join</a>
        	<a href="javascript:void(0);"><span aria-hidden="true" data-icon="&#x70;"></span> Sign In</a>
            -->
            {{loginButtons}}
        </div>
		
    </nav>
    <user>
        {{> tabs}}
        <div id="usernav">
            <div class="tab-content">          
                <div id="owned" class="tab-pane active">
                    <ul>
                        {{#isolate}}
                        {{#each owned}}
                            <li><a href="/{{title}}">{{title}}</a></li>
                        {{/each}}
                        {{/isolate}}
                    </ul>
                </div> 
                <div id="starred" class="tab-pane" >
                    <ul>
                        {{#isolate}}
                        {{#each starred}}
                            <li><a href="/{{title}}">{{title}}</a></li>
                        {{/each}}
                        {{/isolate}}
                    </ul>
                </div>
            </div>
        </div>
    </user>
  </div><!-- end #left_nav -->


</template>


<template name="tabs">
    <ul class="nav nav-tabs" id="testTabs">
          <li class="active"><a href="#owned" data-toggle="tab">Owned</a></li>
          <li><a href="#starred" data-toggle="tab">Starred</a></li>
    </ul>
</template>

<body>

<div id="container">
  <div id="header"></div>

    {{> leftNav}}
  
  <div id="main">
    {{> main}}

	<div id="footer">
  	<!-- end #footer --></div>

	<!-- end #main --></div>
	
	<div id="sidebar_col">
        <div id="sidebar">
            {{> sidebar}}
        </div>
	<!-- end #sidebar --></div>
<!-- end #container --></div>
</body>

<template name="sidebar">
    <ul>
    {{{ navItems }}}
    </ul>
</template>
